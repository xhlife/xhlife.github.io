<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<style>
    *{
        margin: 0;
        padding: 0;
        list-style: none;
    }
    #box{
        width: 800px;
        border: 1px solid #ccc;
        margin: 100px auto;
        padding: 20px;
    }
    #my_textarea{
        width: 80%;
        height: 120px;
    }
    .box-top{
        margin-bottom: 20px;
    }

    #ul li{
        border-bottom: 1px solid #ccc;
        color: red;
        line-height: 44px;
        margin: 0 80px;
    }
    #ul li a{
        float: right;
    }
</style>
<body>
    <div id="box">
        <div class="box-top">
            <label>发表评论：</label> <br>
            <textarea name="" id="my_textarea" cols="60" rows="10"></textarea>
            <button id="btn">发表</button>
        </div>
        <ul id="ul">

        </ul>
    </div>

    <script>
        window.onload = function(){
            $('btn').onclick = function(){
                // 获取用户输入的内容
                var content = $('my_textarea').value;

                // 判断内容是否为空
                if (content.length == 0) {
                    alert('内容不能为空')
                    // 记得返回，不然代码会继续的往下执行
                    return 
                }

                // 创建标签，加入到ul中
                var li = document.createElement('li');
                li.innerHTML = content + '<a href="javascript:;">删除</a>'

                // 每次新的评论都是在前面
                $('ul').insertBefore(li,$('ul').children[0])

                // 发表完成清除输入框的内容
                $('my_textarea').value = ''

                //删除评论

                var as = $('ul').getElementsByTagName('a');
                for (let index = 0; index < as.length; index++) {
                    var a = as[index]
                    a.onclick = function () {
                        // 1.6 获取父标签，删除
                        this.parentNode.remove();
                    }
                }

            }
        }
        function $(id) {
                return typeof id === 'string' ? document.getElementById(id) : null;
            }
    </script>
</body>
</html>
